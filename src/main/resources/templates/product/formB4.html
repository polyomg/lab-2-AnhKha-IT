<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Bài 4 - Product Form</title>
<style>
    .active { font-weight: bold; color: red; }
</style>
</head>
<body>
    <h2>Nhập sản phẩm mới</h2>
    <form action="/product/saveB4" method="post">
        <input name="name" placeholder="Tên sản phẩm">
        <input name="price" placeholder="Giá sản phẩm">
        <button>Save</button>
    </form>

    <!-- Sản phẩm mặc định luôn hiển thị -->
    <h3>Sản phẩm mặc định</h3>
    <ul th:if="${productDefault != null}">
        <li th:text="${productDefault.name != null ? productDefault.name : 'Chưa nhập tên'}">?name</li>
        <li th:text="${productDefault.price != null ? productDefault.price : 'Chưa nhập giá'}">?price</li>
    </ul>

    <h3>Sản phẩm vừa lưu</h3>
    <ul th:if="${savedProduct != null}">
        <li th:text="${savedProduct.name}">?name</li>
        <li th:text="${savedProduct.price}">?price</li>
    </ul>

    <h3>Danh sách sản phẩm (phân trang)</h3>
    <form method="get" action="/product/formB4">
        Page size:
        <select name="size" onchange="this.form.submit()">
            <option th:value="5" th:selected="${size==5}">5</option>
            <option th:value="10" th:selected="${size==10}">10</option>
        </select>
        <input type="hidden" name="page" value="1">
    </form>

    <ul>
        <th:block th:each="item : ${items}">
            <li th:text="${item.name}"></li>
            <li th:text="${item.price}"></li>
        </th:block>
    </ul>

    <div>
        <span>Trang: </span>
        <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
            <a th:href="@{/product/formB4(page=${i}, size=${size})}"
               th:text="${i}"
               th:classappend="${i == currentPage} ? 'active' : ''">1</a>
        </th:block>
    </div>
    
</body>
</html>
